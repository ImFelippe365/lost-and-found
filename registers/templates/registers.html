{% extends 'base.html' %}
{% load static %}
{%block main%}
<section>
    <h2 class="font-bold text-black text-3xl mb-5">Registros</h2>

    <section class="flex flex-row items-center gap-6 justify-between flex-wrap">
        {% include 'search.html' %}

        <select id="orderId" class="border-light-gray rounded-lg pl-6 pr-16 text-gray ">
            <option value="" disabled selected>Ordenar por</option>
            <option value="desc">Mais recentes</option>
            <option value="asc">Mais antigos</option>
        </select>
    </section>
</section>

<div class="table mt-4">
    <a class="table-row text-gray text-start font-bold text-sm">
        <div class="table-cell align-middle pb-2">Status</div>
        <div class="table-cell">Quem encontrou</div>
        <div class="table-cell">Quando foi encontrado</div>
        <div class="table-cell">Nome do item</div>
        <div class="table-cell max-2xl:hidden">Local</div>
        <div class="table-cell max-2xl:hidden">COADES</div>

    </a>

    {% for item in object_list %}
    <a class="table-row {% cycle 'bg-primary-hover' 'bg-background-color' %}" href="{% url 'details' item.id %}">
        <div class="h-full p-4 rounded-l-lg table-cell align-middle">
            <div class="rounded-3xl inline font-bold text-xs text-white px-4 py-1 {% if item.status == 'Entregue' %} bg-success-color
            {% elif item.status == 'Perdido' %}  
            bg-error-color
            {% else %}
            bg-black
        {% endif %}">
                {{ item.status }}
            </div>
        </div>
        <div class="text-black table-cell align-middle">{{ item.who_found }}</div>
        <div class="text-black table-cell align-middle">{{ item.when_was_found }}</div>
        <div class="text-black table-cell align-middle max-2xl:rounded-r-lg ">{{ item.name }}</div>
        <div class="text-black table-cell align-middle max-2xl:hidden">{{ item.local_found }}</div>
        <div class="text-black rounded-r-lg table-cell align-middle max-2xl:hidden">{{ item.pickup_location }}
        </div>
    </a>
    {% endfor %}

</div>
<div class="flex flex-row gap-2 mt-6 self-end">
    {% if page_obj.paginator.num_pages > 1 %}

    {% if page_obj.has_previous %}
    <div>
        <a href="?page={{ page_obj.previous_page_number }}" class="flex flex-row flex-nowrap text-black">
            <img src="{% static 'icon/carbon_chevron-left-black.svg' %}">
            Anterior
        </a>
    </div>
    {% endif %}

    <div>
        {% if page_obj.number == page_obj.paginator.num_pages %}
        <a href="?page=1"
            class="hover:bg-primary-hover py-1 px-2 rounded-full transition-all font-bold text-black">1</a>
        <span class="font-bold text-black">...</span>
        {% endif %}
        <span
            class="bg-primary py-1 px-2 rounded-t-full rounded-r-full rounded-b-full text-black font-bold">{{ page_obj.number }}</span>
    </div>

    {% if page_obj.has_next %}

    <div class="text-black font-bold">
        {% if page_obj.next_page_number != page_obj.paginator.num_pages %}
        <a href="?page={{ page_obj.next_page_number }}"
            class="hover:bg-primary-hover py-1 px-2 rounded-full transition-all">{{ page_obj.next_page_number }}</a>
        {% endif %}
        ...
        <a href="?page={{ page_obj.paginator.num_pages }}"
            class="hover:bg-primary-hover py-1 px-2 rounded-full transition-all">{{ page_obj.paginator.num_pages }}</a>
    </div>

    <div>

        <a href="?page={{ page_obj.next_page_number }}" class="flex flex-row flex-nowrap text-black">
            Pr√≥xima
            <img src="{% static 'icon/carbon_chevron-right-black.svg' %}">
        </a>
    </div>

    {% endif %}
    {% endif %}
</div>

<script src="{% static 'scripts/search.js'%}"></script>
{% endblock %}